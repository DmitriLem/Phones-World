{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block body %}
<div class="container mt-5">
    
    <div class="row mb-2 text-end">
        <div class="col">
            <a href="{{ url_for('index') }}" class="btn btn-outline-primary">Return to main page</a>
            <a href="{{ url_for('add_product') }}" class="btn btn-outline-success">Add new Product</a>
        </div>
    </div>
    
    <!-- Загрузочный оверлей -->
    <div id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 999; text-align: center; padding-top: 20%;">
      <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Deleting...</span>
      </div>
  </div>
    
    <table class="table table-success">
        <thead>
          <tr>
            <th scope="col">Product ID</th>
            <th scope="col">Name</th>
            <th scope="col">Categories</th>
            <th scope="col">Description</th>
            <th scope="col">Quantity</th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
            {% for product in results %}
          <tr>
            <td scope="row">{{ product.product_id }}</td>
            <td>{{ product.name }}</td>
            <td>{{ product.category_name }}</td>
            <td>{{ product.description }}</td>
            <td>{{ product.quantity }}</td>
            <td>
              <a class="btn btn-success" href="{{ url_for('view_product', product_id=product.product_id) }}">View</a>
            </td>
            <td>
              <a class="btn btn-warning" href="{{ url_for('edit_product', product_id=product.product_id) }}">Edit</a>
            </td>
            <td>
                <a class="btn btn-danger" href="#" onclick="confirmDelete('{{ product.name }}', '{{ product.product_id }}')">Delete</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    
</div>

{% endblock %}
